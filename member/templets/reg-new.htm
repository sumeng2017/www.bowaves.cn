
<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>注册</title>
		<link rel="stylesheet" href="/static/zui.min.css" />
		<link rel="stylesheet" href="/static/zui-theme-green.css" />
		<link rel="stylesheet" href="/static/bootstrapValidator.min.css">

		<script type="text/javascript" src="/static/jquery.js"></script>
		<script type="text/javascript" src="/static/layer.js"></script>
		<script src="/static/bootstrap.min.js"></script>
		<script src="/static/bootstrapValidator.min.js"></script>
		<style>
			.kbox{
				padding: 10px 20px;
				margin: 10px 20px;
			}
			body{
				background: #fff;
			}
		</style>
	</head>
	<body>
		<div class="kbox">
		
 <input type="hidden" value="regbase" name="dopost"/>
      <input type="hidden" value="1" name="step"/>
      <input type="hidden" value="个人" name="mtype"/>


				<div class="form-group">
					<label class="col-md-2 control-label"><i class="icon icon-user"></i> 用户名：</label>
					<div class="col-md-9">
						<input type="text" name="userid" id="userid" class="form-control" placeholder="你的用户名" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-md-2 control-label"><i class="icon icon-lock"></i> 密码：</label>
					<div class="col-md-9">
						<input type="password" name="userpwd" id="userpwd" class="form-control" placeholder="你的密码" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-md-2 control-label"><i class="icon icon-lock"></i> 重复密码：</label>
					<div class="col-md-9">
						<input type="password" name="userpwdok" id="userpwdok" class="form-control" placeholder="再次输入你的密码" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-md-2 control-label"><i class="icon icon-envelope-alt"></i> 邮箱：</label>
					<div class="col-md-9">
						<input type="email" name="email" id="email"  class="form-control" placeholder="填写邮箱号，可帮您找回密码" />
					</div>
				</div>
				<div class="form-group">
					<div class="col-md-9 col-md-offset-2">
						<button name="btn-signup" type="submit" class="btn btn-lg btn-block btn-primary" onclick="check()"><i class="icon icon-check-circle"></i> 注 册</button>
						<div class="pull-right" style="margin-top: 15px;"><a href="/member/login.php" style="line-height: 32px;"><i class="icon icon-arrow-left"></i> 已有账号？去登录</a></div>
					</div>
				</div>
			
		</div>
	<script type="text/javascript">






function check(){



$.post("reg_new.php", {"dopost":"regbase","step":"1","mtype":"个人", "userid":$("#userid").val(),"userpwd":$("#userpwd").val(),"userpwdok":$("#userpwdok").val(),"email":$("#email").val(),"email":$("#email").val()},
    function(data){

if(data['start']==0){

alert("用户名不合法！");

}else if(data['start']==1){

alert("包含要允许注册的词语！");

}else if(data['start']==2){

alert("你指定的用户名已存在，请使用别的用户名！");

}else if(data['start']==3){

alert("你使用的Email 不允许注册！");

}else if(data['start']==4){

alert("你使用的Email已经被另一帐号注册，请使其它帐号");

}else if(data['start']==5){

alert("注册失败");

}else if(data['start']==6){

alert("注册成功！");

top.location.href="/";
}


    },"json");


}












	$(document).ready(function() {

	    $('#regForm').bootstrapValidator({
	            message: 'This value is not valid',
	            feedbackIcons: {/*输入框不同状态，显示图片的样式*/
	                valid: 'glyphicon glyphicon-ok',
	                invalid: 'glyphicon glyphicon-remove',
	                validating: 'glyphicon glyphicon-refresh'
	            },
	            fields: {/*验证*/
	                username: {/*键名username和input name值对应*/
	                    message: '用户名非法',
	                    validators: {
	                        notEmpty: {/*非空提示*/
	                            message: '用户名不能为空'
	                        },

	                        regexp:{
	                            regexp:/^[a-zA-Z0-9_\.]+$/,
	                            message:'用户名由数字、字母下划线和.组成'
	                        },


	                        stringLength: {/*长度提示*/
	                            min: 5,
	                            max: 20,
	                            message: '用户名长度必须在%s到%s之间'
	                        }/*最后一个没有逗号*/
	                    }
	                },
	                password: {
	                    message:'密码无效',
	                    validators: {
	                        notEmpty: {
	                            message: '密码不能为空'
	                        },
	                        stringLength: {
	                            min: 6,
	                            max: 12,
	                            message: '密码长度必须在%s到%s之间'
	                        },
	                        identical:{
	                            field:'password',
	                            message:'两次输入的密码不一致'
	                        },
	                        regexp: {
	                        regexp: /^[a-zA-Z0-9]+$/,
	                        message: '密码只能由字母、数字组成~'
	                    }
	                    }
	                },

	                repassword: {
	                    message:'密码无效',
	                    validators: {
	                        notEmpty: {
	                            message: '密码不能为空'
	                        },
	                        stringLength: {
	                            min: 6,
	                            max: 12,
	                            message: '密码长度必须在%s到%s之间'
	                        },
	                        identical:{
	                            field:'password',
	                            message:'两次密码输入不一致'
	                        },
	                        regexp: {
	                        regexp: /^[a-zA-Z0-9]+$/,
	                        message: '密码只能由字母、数字组成~'
	                    }
	                    }
	                },

	                email: {
	                    validators: {
	                        notEmpty: {
	                            message: 'Email地址不能为空'
	                        },
	                        emailAddress: {
	                            message: '不是有效的Email地址'
	                        }
	                    }
	                }
	            }
	        });
	});
	</script>

	<script type="text/javascript">
		$("#regForm").keydown(function(e){
		 var e = e || event,
		 keycode = e.which || e.keyCode;
		 if (keycode==13) {
		 $(".btn").trigger("click");
		 }
		});
	</script>

	</body>
</html>

